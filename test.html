<?php
 $allowedExts = array("gif", "jpeg", "jpg", "png");
 $extension = end(explode(".", $_FILES["file"]["name"]));
 if ((($_FILES["file"]["type"] == "image/gif")
 || ($_FILES["file"]["type"] == "image/jpeg")
 || ($_FILES["file"]["type"] == "image/jpg")
 || ($_FILES["file"]["type"] == "image/pjpeg")
 || ($_FILES["file"]["type"] == "image/x-png")
 || ($_FILES["file"]["type"] == "image/png"))
    && ($_FILES["file"]["size"] < 50000)
    && in_array($extension, $allowedExts))
  {
 if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
 else
{
   echo "Upload: " . $_FILES["file"]["name"] . "<br>";
   echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

if (file_exists("C:/wamp/www/djaodjin-annotate-master/images/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "C:/wamp/www/djaodjin-annotate-master/images/" . $_FILES["file"]["name"]);
 // echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  $tmp = "C:/wamp/www/djaodjin-annotate-master/images/" . $_FILES["file"]["name"];
  echo $tmp;
  }
  }
}
else
 {
 echo "Invalid file";
 }
?>
<!DOCTYPE html>
<html>
<head>
	<title>
		Exemple de HTML
	</title>
</head>
<link rel="stylesheet" type="text/css" href="vendor/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/annotate.css">
<body>


	<div class="my-image-selector">
		<input id="file" name="file" type="file" />
		<button class="push-new-image">Push a new image!</button>
	</div>
	<div style="margin-top:50px">
		<div  id="myCanvas" style="position:relative"></div>
	</div>
	
	
	
	
	
	
	
	
	
	<button onclick="uploadFile();">Upload</button>
	<script type="text/javascript" src="vendor/js/jquery.min.js"></script>
	<script type="text/javascript" src="vendor/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="djaodjin-annotate.js"></script>
	<script>
		$(document).ready(function(){
			var counter = 0;
			$('#myCanvas').on("annotate-image-added", function(event, id, path){
				$(".my-image-selector").append("<label><input type=\"radio\" name=\"image-selector\" class=\"annotate-image-select\" value=\"" + path + "\" checked id=\"" + id + "\"><img src=\"" + path + "\" width=\"35\" height=\"35\"></label>");
			});
			$('#myCanvas').annotate({
				color: 'blue',
				bootstrap: true,
				images: ['images/test.jpg']});

		/*	$(".push-new-image").click(function(event) {
				if (counter === 0){
					$('#myCanvas').annotate("push", "images/test_2.jpg");
					counter += 1;
				}else{
					$('#myCanvas').annotate("push", {id:"unique_identifier", path:"images/Computer-Wallpaper-HD-Top-Desktop-Wall.jpg"});
				}
			});*/
		//upload image
			function readURL(input) {
			if (input.files && input.files[0]) {
				var reader = new FileReader();
					reader.onload = function (e) {
					$('#myCanvas').annotate('push', e.target.result);
					}
					reader.readAsDataURL(input.files[0]);
				}
			}
			$("#file").change(function () {
			readURL(this);
			});
		});
		
	</script>



</body>
</html>
